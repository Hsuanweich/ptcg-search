<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  		<title>PTCG</title>
<!-- 

Highway Template

https://templatemo.com/tm-520-highway

-->
<!--
登入成功:window.location.href=""
-->
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/fontAwesome.css">
        <link rel="stylesheet" href="css/light-box.css">
        <link rel="stylesheet" href="css/templatemo-style.css">

        <link href="https://fonts.googleapis.com/css?family=Kanit:100,200,300,400,500,600,700,800,900" rel="stylesheet">

        <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <style>
          html, body {
              margin: 0;
              padding: 0;
              height: 100%;
          }

          .fullscreen-bg {
              position: relative;
              width: 100vw;
              height: 100vh;
              overflow: hidden;
          }

          .fullscreen-bg img {
              width: 100vw;
              height: 100vh;
              object-fit: fill; /*圖片會鋪滿區塊，即使變形*/
              position: absolute;
              top: 0;
              left: 0;
              z-index: -1;
          }

          .content {
              position: relative;
              z-index: 1;
              color: white;
              text-align: center;
              padding-top: 20vh;
          }
      </style>
      <style>
        body {
          font-family: "DFKai-SB", "標楷體", DFKai, serif;
        }
      </style>
      <script>
        window.onload = function () {
          // 自動顯示modal視窗
          const modal = document.getElementById("modal");
          modal.style.display = "block";
        }
      </script>

    </head>

<body>
    <!--左上角按鈕-->
    <nav>
        <div class="logo">
            <a href="/">PTCG<em>圖片分析</em></a>
        </div>
        <div class="menu-icon">
        <span></span>
      </div>
    </nav>

    <!--封面文字-->
    <div id="video-container">
        <div class="video-overlay"></div>
        <div class="video-content">
            <div class="inner">
              <h1>PTCG 圖片分析檢索 <em>登入介面</em></h1>
              <br>
              <br>
              <br> 
            </div>
        </div>
        <div class="fullscreen-bg">
          <img src="img/htmlbackground.jpg" alt="">
        </div>
    </div>

    <!--copyright-->
    <footer>
        <div class="container-fluid">
            <div class="col-md-12">
                <p>Copyright &copy; 2024 Lickitung
    
    | Designed by Kevin Lin</p>
            </div>
        </div>
    </footer>


      <!-- Modal button -->
    <div class="popopupu-icon">
      <button id="modBtn" class="modal-btn"><img src="img/登入.png" alt=""></button>
    </div>  


    <!--按鈕要做的事-->
  
    <button id="openModal">開啟登入視窗</button>
    <div id="modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="header-title">登入</h3>   
        </div>
        <div class="modal-body">
          <div class="col-md-6 col-md-offset-3">
            <form id="contact" action="" method="post">
                <div class="row">
                    <div class="col-md-12">
                      <fieldset>
                        <input name="username" type="text" class="form-control" id="username" placeholder="您的帳號..." required>
                      </fieldset>
                    </div>
                    <div class="col-md-12">
                      <fieldset>
                        <input name="password" type="password" class="form-control" id="password" placeholder="您的密碼..." required>
                      </fieldset>
                    </div>
                    <div class="col-md-12">
                    </div>
                    <div class="col-md-12">
                      <fieldset>
                        <button type="button" value="Submit" onclick="validateForm()">登入</button>
                      </fieldset>
                    </div>
                </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      async function validateForm() {
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;

        try {
          const formData = new FormData();
          formData.append('username', username);
          formData.append('password', password);

          const response = await fetch('/login', {
            method: 'POST',
            body: formData
          });

          const result = await response.json();

          if (response.ok) {
            window.location.href = result.redirect || "/testprogram";
          }
          else {
            alert(result.message || "登入失敗！");
          }
        }
        catch (error) {
          console.error("登入錯誤：", error);
          alert("無法連接伺服器！");
        }
      }
    </script>

    <!--MENU選單-->
    <section class="overlay-menu">
      <div class="container">
        <div class="row">
          <div class="main-menu">
              <ul>
                <!--
                  <li>
                      <a href="testprogram.html">測試程式執行</a>
                  </li>
                  <li>
                    <a href="http://127.0.0.1:5000">開始進行程式測試</a>
                  </li>
                  <li>
                      <a href="index.html">Home - Full-width</a>
                  </li>
                  <li>
                      <a href="masonry.html">Home - Masonry</a>
                  </li>
                  <li>
                      <a href="grid.html">Home - Small-width</a>
                  </li>
                  <li>
                      <a href="about.html">About Us</a>
                  </li>
                  <li>
                      <a href="blog.html">Blog Entries</a>
                  </li>
                  <li>
                      <a href="single-post.html">Single Post</a>
                  </li>
                  -->
              </ul>
              <p>我們將會為您帶來至尊級的服務</p>
          </div>
        </div>
      </div>
    </section>

    <!--引用-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

    <script src="js/vendor/bootstrap.min.js"></script>
    
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>

    
</body>
</html>